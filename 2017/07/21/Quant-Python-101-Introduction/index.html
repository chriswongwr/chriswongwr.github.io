<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/LSE_icon.jpg?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/LSE_icon.jpg?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/LSE_icon.jpg?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Quant,Python,Introduction," />










<meta name="description" content="I. Quant Investing Background 量化投资背景  Quant is the abbreviation of Quantitative, meaning relating to, measuring, or measured by the quantity of something rather than its quality, according to its def">
<meta name="keywords" content="Quant,Python,Introduction">
<meta property="og:type" content="article">
<meta property="og:title" content="Quant Python 101: Introduction">
<meta property="og:url" content="http://yoursite.com/2017/07/21/Quant-Python-101-Introduction/index.html">
<meta property="og:site_name" content="Rui&#39;Blog">
<meta property="og:description" content="I. Quant Investing Background 量化投资背景  Quant is the abbreviation of Quantitative, meaning relating to, measuring, or measured by the quantity of something rather than its quality, according to its def">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://yoursite.com/2017/07/21/Quant-Python-101-Introduction/Code.jpg">
<meta property="og:image" content="http://yoursite.com/2017/07/21/Quant-Python-101-Introduction/flow.jpg">
<meta property="og:updated_time" content="2018-08-03T13:53:53.215Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Quant Python 101: Introduction">
<meta name="twitter:description" content="I. Quant Investing Background 量化投资背景  Quant is the abbreviation of Quantitative, meaning relating to, measuring, or measured by the quantity of something rather than its quality, according to its def">
<meta name="twitter:image" content="http://yoursite.com/2017/07/21/Quant-Python-101-Introduction/Code.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2017/07/21/Quant-Python-101-Introduction/"/>





  <title>Quant Python 101: Introduction | Rui'Blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Rui'Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">To Understand the Causes of Things.</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-portfolio">
          <a href="/My-Portfolio/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-line-chart"></i> <br />
            
            Portfolio
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/21/Quant-Python-101-Introduction/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Rui Wang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/LSE.JPG">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Rui'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Quant Python 101: Introduction</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-07-21T16:36:08+08:00">
                2017-07-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Quant-101/" itemprop="url" rel="index">
                    <span itemprop="name">Quant 101</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2017/07/21/Quant-Python-101-Introduction/" class="leancloud_visitors" data-flag-title="Quant Python 101: Introduction">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><img src="/2017/07/21/Quant-Python-101-Introduction/Code.jpg" alt=""></p>
<h3 id="I-Quant-Investing-Background-量化投资背景"><a href="#I-Quant-Investing-Background-量化投资背景" class="headerlink" title="I. Quant Investing Background 量化投资背景"></a>I. Quant Investing Background 量化投资背景</h3><p>  Quant is the abbreviation of Quantitative, meaning relating to, measuring, or measured by the quantity of something rather than its quality, according to its definition. Quantitative Investing, or Quant Investing is an investment method that applies mathematics, statistics and computer science to Finance fields.<br><a id="more"></a><br>Recently, Big data, machine learning become a new research field of quant investing. It seems that those techniques are very power. However, the truth is that many machine learning methods are overfit the financial data; since financial data have lots of noise, machine learning methods will always fit the noise instead of meaningful feartures. With more and more advance research in deep learning(ARR,NRR…), some data scientists indeed figure out some methods to overcome the problems of overfitting.</p>
<h3 id="II-Quant-Investing-Procedures-量化投资的过程"><a href="#II-Quant-Investing-Procedures-量化投资的过程" class="headerlink" title="II. Quant Investing Procedures 量化投资的过程"></a>II. Quant Investing Procedures 量化投资的过程</h3><p><em>There is no secret formula or strategy for quant investing.</em> Quant trading is a pactical science, like Traditional Chinese Medicine. So Consider yourself as a Phd student! You gotta to research and test again and again. No one knows the answer, even your boss, until you backtest the strategies. <em>Thus, the only way to check whether your strategies work or not is backtesting!</em></p>
<p>Before you could actually begin you research and investing, you need the following things:</p>
<h4 id="1-Data"><a href="#1-Data" class="headerlink" title="1. Data"></a>1. Data</h4><p>Data is the first cornerstone for quant investing. Just as a saying goes, “Garbage in, garbage out”. If the data is unreliable, everything based on the data is garbage. So please pay lots of attention to data and make sure you could process the source data clean and accurate. The quality of your data determines your investing results. I will write more about data in later blogs.&lt;&gt;<br>A typical data structure like this:</p>
<table>
<thead>
<tr>
<th>Time</th>
<th>open</th>
<th>high</th>
<th>low</th>
<th>close</th>
<th>volume</th>
<th>P/E</th>
<th>…</th>
</tr>
</thead>
<tbody>
<tr>
<td>20170101</td>
<td>10.00</td>
<td>10:48</td>
<td>9.89</td>
<td>10.23</td>
<td>121324</td>
<td>25.23</td>
<td>…</td>
</tr>
</tbody>
</table>
<h4 id="2-Strategy-Logic"><a href="#2-Strategy-Logic" class="headerlink" title="2. Strategy Logic"></a>2. Strategy Logic</h4><p>Select a direction of you strategy. And you gotta know the logic behind the strategies. These strategies comes from differ sources, such as former experience, research assumptions(Brownian Motion), Efficient Markets Hypothesis, and arbitrage theorem. I will expand this discussion in Part III.</p>
<h4 id="3-Trading-System-Execute"><a href="#3-Trading-System-Execute" class="headerlink" title="3. Trading System(Execute)"></a>3. Trading System(Execute)</h4><p>For a simple trading system, it consists of at least three parts: order management, order execution, and execute algorithm. Notice that the “execute algorithm” here only refer to order split algorithms. For example, if you want to buy 1 million shares of AAPL, this execute algorithm will divide 1 million shares to lots of small orders, so that other investors cannot observe the strong demand and the order can have a better execution price. Typical execute algo inclues VWAP and TWAP, etc.</p>
<h4 id="4-Visual-and-evaluation-System-GUI"><a href="#4-Visual-and-evaluation-System-GUI" class="headerlink" title="4. Visual and evaluation System(GUI)"></a>4. Visual and evaluation System(GUI)</h4><p>A typical Quant Investing Procedures are like this:<br><img src="/2017/07/21/Quant-Python-101-Introduction/flow.jpg" alt=""></p>
<h3 id="III-Quant-Investing-Strategies-量化投资策略分类"><a href="#III-Quant-Investing-Strategies-量化投资策略分类" class="headerlink" title="III. Quant Investing Strategies 量化投资策略分类"></a>III. Quant Investing Strategies 量化投资策略分类</h3><p>Many Quant Strategies are based on original trading strategies, including technical analysis model. Quant(computer scientists) just apply those “Old” strategies in the computer-based system. While thanks to many mathematicians, statistics, and data scientist, many new strategies are invented and works really well. For this generation, everyone could create its own strategies and make a profit, but before that, we still need the building blocks to design our own strategies.</p>
<h4 id="Stock-selection-量化择股"><a href="#Stock-selection-量化择股" class="headerlink" title="Stock selection 量化择股"></a>Stock selection 量化择股</h4><h4 id="Time-selection-量化择时"><a href="#Time-selection-量化择时" class="headerlink" title="Time selection 量化择时"></a>Time selection 量化择时</h4><p>In short, time selection is very similar to Stock selection. Rather, time selection is to figure when to buy in and when to exit one or more stocks. This strategy has a basic assumption: there is <a href="https://en.wikipedia.org/wiki/Market_timing" target="_blank" rel="noopener">market timing</a> in the financial market. For more info about market timing, please refer to <a href="http://www.360doc.com/content/16/0713/16/14897449_575232947.shtml" target="_blank" rel="noopener">Li’s essay</a>. </p>
<p>Assuming market timing exist, this is, we could make a profit by predicting the time to enter/exit market. Logically, when the market works well, we enter; before the market performs poorly, we exit. We mainly use four dimensions to predict the when is a good time to enter: leading macroeconomics index, technical analysis,fundamental analysis, and sentiment level.</p>
<p>A simple example for markting timing strategy is <a href="https://chriswongwr.github.io/2017/07/21/Basic-Strategy-1-Moving-Average/#more" target="_blank" rel="noopener">simple moving average</a>, SMA.</p>
<h4 id="Stock-Index-Futures-股指期货"><a href="#Stock-Index-Futures-股指期货" class="headerlink" title="Stock Index Futures 股指期货"></a>Stock Index Futures 股指期货</h4><h4 id="Commodities-Futures-商品期货"><a href="#Commodities-Futures-商品期货" class="headerlink" title="Commodities Futures 商品期货"></a>Commodities Futures 商品期货</h4><h4 id="Statistics-统计套利"><a href="#Statistics-统计套利" class="headerlink" title="Statistics 统计套利"></a>Statistics 统计套利</h4><p>协整性</p>
<h4 id="Options-期权套利"><a href="#Options-期权套利" class="headerlink" title="Options 期权套利"></a>Options 期权套利</h4><h4 id="Algo-Trading算法交易"><a href="#Algo-Trading算法交易" class="headerlink" title="Algo Trading算法交易"></a>Algo Trading算法交易</h4><h4 id="Assets-Allocation资产配置"><a href="#Assets-Allocation资产配置" class="headerlink" title="Assets Allocation资产配置"></a>Assets Allocation资产配置</h4><h4 id="Machine-Learning-and-Text-Mining-to-be-continued"><a href="#Machine-Learning-and-Text-Mining-to-be-continued" class="headerlink" title="Machine Learning and Text Mining (to be continued)"></a>Machine Learning and Text Mining (to be continued)</h4><h4 id="High-Frequency-高频策略-to-be-continued"><a href="#High-Frequency-高频策略-to-be-continued" class="headerlink" title="High Frequency 高频策略 (to be continued)"></a>High Frequency 高频策略 (to be continued)</h4>
      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>Donate here! Thanks for the support!</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>Donate</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatpay.jpg" alt="Rui Wang WeChat Pay"/>
        <p>WeChat Pay</p>
      </div>
    

    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Quant/" rel="tag"><i class="fa fa-tag"></i> Quant</a>
          
            <a href="/tags/Python/" rel="tag"><i class="fa fa-tag"></i> Python</a>
          
            <a href="/tags/Introduction/" rel="tag"><i class="fa fa-tag"></i> Introduction</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/07/21/Study-Notes-ISLR/" rel="next" title="Study Notes - ISLR">
                <i class="fa fa-chevron-left"></i> Study Notes - ISLR
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/07/26/Quant-Python-101-Matplotlib/" rel="prev" title="Quant Python 101: Matplotlib">
                Quant Python 101: Matplotlib <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div id="lv-container" data-id="city" data-uid="MTAyMC8zODI5OC8xNDgyNg=="></div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/LSE.JPG"
                alt="Rui Wang" />
            
              <p class="site-author-name" itemprop="name">Rui Wang</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">22</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#I-Quant-Investing-Background-量化投资背景"><span class="nav-number">1.</span> <span class="nav-text">I. Quant Investing Background 量化投资背景</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#II-Quant-Investing-Procedures-量化投资的过程"><span class="nav-number">2.</span> <span class="nav-text">II. Quant Investing Procedures 量化投资的过程</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-Data"><span class="nav-number">2.1.</span> <span class="nav-text">1. Data</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-Strategy-Logic"><span class="nav-number">2.2.</span> <span class="nav-text">2. Strategy Logic</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-Trading-System-Execute"><span class="nav-number">2.3.</span> <span class="nav-text">3. Trading System(Execute)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-Visual-and-evaluation-System-GUI"><span class="nav-number">2.4.</span> <span class="nav-text">4. Visual and evaluation System(GUI)</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#III-Quant-Investing-Strategies-量化投资策略分类"><span class="nav-number">3.</span> <span class="nav-text">III. Quant Investing Strategies 量化投资策略分类</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Stock-selection-量化择股"><span class="nav-number">3.1.</span> <span class="nav-text">Stock selection 量化择股</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Time-selection-量化择时"><span class="nav-number">3.2.</span> <span class="nav-text">Time selection 量化择时</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Stock-Index-Futures-股指期货"><span class="nav-number">3.3.</span> <span class="nav-text">Stock Index Futures 股指期货</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Commodities-Futures-商品期货"><span class="nav-number">3.4.</span> <span class="nav-text">Commodities Futures 商品期货</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Statistics-统计套利"><span class="nav-number">3.5.</span> <span class="nav-text">Statistics 统计套利</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Options-期权套利"><span class="nav-number">3.6.</span> <span class="nav-text">Options 期权套利</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Algo-Trading算法交易"><span class="nav-number">3.7.</span> <span class="nav-text">Algo Trading算法交易</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Assets-Allocation资产配置"><span class="nav-number">3.8.</span> <span class="nav-text">Assets Allocation资产配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Machine-Learning-and-Text-Mining-to-be-continued"><span class="nav-number">3.9.</span> <span class="nav-text">Machine Learning and Text Mining (to be continued)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#High-Frequency-高频策略-to-be-continued"><span class="nav-number">3.10.</span> <span class="nav-text">High Frequency 高频策略 (to be continued)</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Rui Wang</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  
    <script type="text/javascript">
      (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
      })(document, 'script');
    </script>
  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("Yzi3hMQUNxQ2EhwrQSUrYflG-gzGzoHsz", "Uf6b5IRVuYJH18drK8AMYB2m");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  

  

  

  

</body>
</html>
